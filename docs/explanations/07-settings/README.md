# 📱 הגדרות והיסטוריה

## 🎯 מה זה עושה?

מסך ההגדרות מאפשר ליוגב:
- לראות את הפרופיל שלו
- לראות סטטיסטיקות (כמה רשימות, קבלות, פריטים)
- לשנות הגדרות אישיות
- להתנתק מהאפליקציה

---

## 📱 איך נראה מסך ההגדרות

```
┌─────────────────────────────────────────────────────────┐
│  ⚙️ הגדרות                                             │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌────────────────────────────────────────────────────┐ │
│  │         👤                                         │ │
│  │     יוגב כהן                                       │ │
│  │   yogev@gmail.com                                  │ │
│  └────────────────────────────────────────────────────┘ │
│                                                         │
│  📊 סטטיסטיקות                                         │
│  ┌────────────┬────────────┬────────────┐             │
│  │ 📋 5       │ 🧾 12      │ 📦 28      │             │
│  │ רשימות     │ קבלות      │ פריטים     │             │
│  └────────────┴────────────┴────────────┘             │
│                                                         │
│  ⚙️ העדפות                                             │
│  ┌────────────────────────────────────────────────────┐ │
│  │ 🌙 מצב כהה                              [ ✓ ]     │ │
│  │ 📱 תצוגה מרוכזת                         [   ]     │ │
│  │ 💰 הצג מחירים                           [ ✓ ]     │ │
│  └────────────────────────────────────────────────────┘ │
│                                                         │
│  ┌────────────────────────────────────────────────────┐ │
│  │ 🔄 עדכן מחירים                                    │ │
│  │ 📖 הצג הדרכה                                      │ │
│  │ 🚪 התנתק                                          │ │
│  └────────────────────────────────────────────────────┘ │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## ⚙️ הגדרות זמינות

| הגדרה | מה זה עושה |
|-------|-----------|
| **מצב כהה** | משנה את העיצוב לכהה (לילה) |
| **תצוגה מרוכזת** | מציג פחות פרטים על כל פריט |
| **הצג מחירים** | מראה/מסתיר מחירים ברשימות |

---

## 📊 סטטיסטיקות

המסך מציג מספרים מעניינים:

| מדד | מה זה מראה |
|-----|-----------|
| 📋 רשימות | כמה רשימות פעילות יש |
| 🧾 קבלות | כמה קניות סיימת |
| 📦 פריטים | כמה מוצרים יש במזווה |

---

## 📖 דוגמה - יוגב רוצה מצב כהה

**מה יוגב עושה:**
1. פותח טאב "הגדרות" ⚙️
2. מוצא "מצב כהה"
3. לוחץ על המתג (Toggle)

**מה קורה:**
1. כל האפליקציה משתנה לצבעים כהים
2. ההגדרה נשמרת בטלפון
3. בפעם הבאה שיפתח - יהיה כהה

---

## 🚪 התנתקות

כשיוגב לוחץ "התנתק":

```
┌─────────────────────────────────────────────────────────┐
│              ⚠️ האם להתנתק?                            │
│                                                         │
│  כל הנתונים המקומיים יימחקו:                           │
│  • העדפות                                               │
│  • Cache                                                │
│                                                         │
│  (הנתונים בענן נשמרים)                                 │
│                                                         │
│        [ביטול]              [התנתק]                    │
└─────────────────────────────────────────────────────────┘
```

---

## 📜 היסטוריה (קבלות)

ההיסטוריה מופיעה בדף הבית, אבל אפשר לראות פרטים מלאים:

```
┌─────────────────────────────────────────────────────────┐
│  🧾 פרטי קבלה                                          │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  🏪 סופר יוחננוף                                       │
│  📅 15/01/2024                                          │
│  ⏱️ 35 דקות                                            │
│                                                         │
│  📋 פריטים:                                             │
│  • חלב 3% ליטר              ₪7.90                      │
│  • גבינה צהובה              ₪22.00                     │
│  • יוגורט x3                ₪16.50                     │
│  ...                                                    │
│                                                         │
│  ────────────────────────────────────                  │
│  סה"כ:                      ₪234.50                    │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## 💾 איפה המידע נשמר?

### קבצים ותפקידים

| קובץ | מה הוא עושה? |
|------|-------------|
| [settings_screen.dart](../../../lib/screens/settings/settings_screen.dart) | מסך ההגדרות |
| [receipt_details_screen.dart](../../../lib/screens/history/receipt_details_screen.dart) | פרטי קבלה |
| [user_context.dart](../../../lib/providers/user_context.dart) | שומר העדפות |
| [receipt_provider.dart](../../../lib/providers/receipt_provider.dart) | שומר קבלות |

### מה נשמר ואיפה?

**בטלפון (SharedPreferences):**
```
themeMode: 1  // 0=light, 1=dark, 2=system
compactView: false
showPrices: true
householdName: "משפחת כהן"
householdType: "family"
```

**ב-Firebase (קבלות):**
```
receipts/קבלה_id:
  store_name: "סופר יוחננוף"
  date: timestamp
  total_amount: 234.50
  shopping_duration: 2100  // שניות
  is_virtual: true
  household_id: "house_abc123"
  items: [...]
```

---

## ⚠️ דברים לבדוק

### עובד:
- ✅ שינוי ערכת נושא (בהיר/כהה)
- ✅ שמירת העדפות מקומית
- ✅ התנתקות בטוחה
- ✅ הצגת סטטיסטיקות
- ✅ צפייה בקבלות

### לבדוק:
- ❓ האם אפשר לערוך את הפרופיל?
- ❓ האם אפשר לשנות סיסמה?
- ❓ האם יש אפשרות למחוק חשבון?

---

## 🔗 קישורים בין מסכים

```
MainNavigationScreen
       │
  Tab 3: הגדרות
       ↓
 SettingsScreen
       │
       ├── "התנתק" → LoginScreen
       │
       ├── "הצג הדרכה" → Tutorial
       │
       └── "עדכן מחירים" → רענון נתונים
```

---

## 📝 סיכום

מסך ההגדרות הוא **מרכז הבקרה** של יוגב.

**מה אפשר לעשות:**
- לראות מידע על החשבון
- לשנות העדפות עיצוב
- לראות סטטיסטיקות
- להתנתק

**ההיסטוריה:**
- מציגה את כל הקניות שעשה
- כולל פירוט מוצרים ומחירים
- כולל זמן קנייה
