# 📱 דף הבית הראשי

## 🎯 מה זה עושה?

דף הבית הוא המסך הראשון שרואים אחרי ההתחברות.
הוא מציג:
- ברכה אישית עם השם של המשתמש
- הודעה אם יש הזמנות לקבוצות ממתינות
- כל הרשימות הפעילות שלך
- היסטוריית קניות (קבלות)
- כפתור ליצירת רשימה חדשה

---

## 🏗️ מבנה המסך הראשי

האפליקציה בנויה עם **4 טאבים** בתחתית:

```
┌─────────────────────────────────────────────────────────┐
│                                                         │
│                    [תוכן המסך]                          │
│                                                         │
│                                                         │
├─────────────────────────────────────────────────────────┤
│  🏠 בית  │  📦 מזווה  │  👥 קבוצות  │  ⚙️ הגדרות     │
└─────────────────────────────────────────────────────────┘
```

| טאב | שם | מה מציג |
|-----|----|---------|
| 0 | בית | רשימות פעילות + היסטוריה |
| 1 | מזווה | המלאי שיש בבית |
| 2 | קבוצות | קבוצות משפחה/שיתוף |
| 3 | הגדרות | הגדרות אישיות |

---

## 🔄 מה יוגב רואה כשהוא נכנס לדף הבית?

```
┌─────────────────────────────────────────────────────────┐
│  ┌──────────────────────────────────────────────────┐  │
│  │ 👋  שלום, יוגב!                          📬 (2)  │  │
│  └──────────────────────────────────────────────────┘  │
│                                                         │
│  🛒 רשימות פעילות                                  (3) │
│  ┌──────────────────────────────────────────────────┐  │
│  │ 🛒 קניות שבועיות          נותרו 5 פריטים        │  │
│  │ ████████░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░  40%  │  │
│  └──────────────────────────────────────────────────┘  │
│  ┌──────────────────────────────────────────────────┐  │
│  │ 💊 בית מרקחת              נותרו 2 פריטים        │  │
│  │ ██████████████████████████░░░░░░░░░░░░░░░  80%  │  │
│  └──────────────────────────────────────────────────┘  │
│  ┌──────────────────────────────────────────────────┐  │
│  │ 🥬 ירקות                  הושלם! ✓              │  │
│  │ ██████████████████████████████████████████ 100%  │  │
│  └──────────────────────────────────────────────────┘  │
│                                                         │
│  📜 היסטוריה                                ▼ (פתח)   │
│                                                         │
│                                    ┌──────────────┐     │
│                                    │ + רשימה חדשה │     │
│                                    └──────────────┘     │
└─────────────────────────────────────────────────────────┘
```

---

## 📖 דוגמה מפורטת - מה קורה כשיוגב פותח את האפליקציה?

**הסיטואציה:** יוגב כבר רשום ומחובר. הוא פותח את האפליקציה.

**מה קורה צעד אחר צעד:**

1. **האפליקציה טוענת את המידע:**
   - מביאה את הרשימות של יוגב מ-Firebase
   - מביאה את ההיסטוריה (קבלות)
   - בודקת אם יש הזמנות לקבוצות ממתינות

2. **יוגב רואה:**
   - "שלום, יוגב!" + אייקון 👋
   - אם יש לו הזמנות ממתינות - רואה אייקון מעטפה עם מספר (📬)
   - רשימות פעילות עם פס התקדמות

3. **יוגב לוחץ על רשימה:**
   - נפתח מסך פרטי הרשימה עם כל המוצרים

4. **יוגב לוחץ על כפתור "+ רשימה חדשה":**
   - נפתח מסך יצירת רשימה חדשה

---

## 🔄 זרימת מידע - איך המידע מגיע לדף הבית?

```
┌─────────────────┐     ┌─────────────────────┐     ┌─────────────────┐
│    Firebase     │ --> │ ShoppingListsProvider│ --> │ HomeDashboard  │
│   (בענן)        │     │   (זוכר רשימות)      │     │   (מציג)       │
└─────────────────┘     └─────────────────────┘     └─────────────────┘

┌─────────────────┐     ┌─────────────────────┐     ┌─────────────────┐
│    Firebase     │ --> │   ReceiptProvider   │ --> │ HomeDashboard  │
│   (בענן)        │     │   (זוכר קבלות)      │     │   (מציג)       │
└─────────────────┘     └─────────────────────┘     └─────────────────┘

┌─────────────────┐     ┌─────────────────────┐     ┌─────────────────┐
│    Firebase     │ --> │PendingInvitesProvider│--> │ HomeDashboard  │
│   (בענן)        │     │  (הזמנות ממתינות)   │     │ (מציג 📬)      │
└─────────────────┘     └─────────────────────┘     └─────────────────┘
```

---

## 📖 דוגמה - יוגב מרענן את הדף

**מה יוגב עושה:**
- מושך למטה (Pull to Refresh)

**מה קורה:**
1. האפליקציה מראה אנימציית טעינה
2. מבקשת מ-Firebase את הנתונים העדכניים
3. מעדכנת את:
   - רשימות הקניות
   - ההיסטוריה (קבלות)
   - הצעות חכמות
4. הכל מתעדכן על המסך

---

## 💾 איפה המידע נשמר?

### קבצים ותפקידים

| קובץ | מה הוא עושה? |
|------|-------------|
| [main_navigation_screen.dart](../../../lib/screens/main_navigation_screen.dart) | המסגרת הראשית - 4 הטאבים בתחתית |
| [home_dashboard_screen.dart](../../../lib/screens/home/dashboard/home_dashboard_screen.dart) | דף הבית עצמו - מה רואים בתוך |
| [shopping_lists_provider.dart](../../../lib/providers/shopping_lists_provider.dart) | "הזיכרון" - שומר את כל הרשימות |
| [receipt_provider.dart](../../../lib/providers/receipt_provider.dart) | שומר את היסטוריית הקניות |
| [pending_invites_provider.dart](../../../lib/providers/pending_invites_provider.dart) | שומר הזמנות ממתינות |
| [user_context.dart](../../../lib/providers/user_context.dart) | מי המשתמש המחובר (שם, אימייל) |

### איך הם עובדים יחד?

```
MainNavigationScreen
├── Tab 0: HomeDashboardScreen  ← דף הבית
│   ├── Header (ברכה + התראות)
│   ├── Active Lists (רשימות פעילות)
│   └── History (היסטוריה)
│
├── Tab 1: MyPantryScreen       ← מזווה
├── Tab 2: GroupsListScreen     ← קבוצות
└── Tab 3: SettingsScreen       ← הגדרות
```

---

## 🎯 פעולות שאפשר לעשות בדף הבית

| פעולה | מה קורה | לאן עוברים |
|-------|---------|-----------|
| לחיצה על רשימה | פותח את הרשימה | מסך פרטי רשימה |
| לחיצה על "+ רשימה חדשה" | יוצר רשימה חדשה | מסך יצירת רשימה |
| לחיצה על 📬 (הזמנות) | מציג הזמנות ממתינות | מסך הזמנות לקבוצות |
| משיכה למטה | מרענן את המידע | נשאר באותו מסך |
| לחיצה על קבלה בהיסטוריה | מציג פרטי קבלה | מסך פרטי קבלה |

---

## ⚠️ התנהגויות מיוחדות

### כפתור "חזרה" (Back)

```
מה קורה כשיוגב לוחץ "חזרה":

בטאב 1-3 (מזווה/קבוצות/הגדרות):
    ↓
חוזר לטאב 0 (דף הבית)

בטאב 0 (דף הבית) - לחיצה ראשונה:
    ↓
"לחץ פעם נוספת ליציאה"

בטאב 0 - לחיצה שנייה תוך 2 שניות:
    ↓
יוצא מהאפליקציה
```

### אם אין רשימות פעילות

```
┌──────────────────────────────────────────────────┐
│                                                  │
│              🛒                                  │
│                                                  │
│        אין רשימות פעילות                         │
│    לחץ כאן ליצירת רשימה חדשה                     │
│                                                  │
└──────────────────────────────────────────────────┘
```

---

## 🎨 עיצוב מיוחד

### צבעי רשימות לפי סוג

| סוג רשימה | צבע | אימוג'י |
|----------|-----|---------|
| סופרמרקט | ירוק 🟢 | 🛒 |
| בית מרקחת | ורוד 🩷 | 💊 |
| ירקן | תכלת 🔵 | 🥬 |
| קצביה | כתום 🟠 | 🥩 |
| מאפיה | צהוב 🟡 | 🥖 |
| אירוע | סגול 🟣 | 🎉 |

### פס התקדמות

```
רשימה עם 3 מתוך 10 מסומנים:
████████████░░░░░░░░░░░░░░░░░░░░░░  30% (בצבע הרשימה)

רשימה מושלמת (100%):
████████████████████████████████████  ✓ (ירוק)
```

---

## ⚠️ דברים לבדוק

### עובד:
- ✅ טעינת רשימות מ-Firebase
- ✅ הצגת הזמנות ממתינות
- ✅ Pull to Refresh
- ✅ ניווט לרשימה בלחיצה
- ✅ כפתור יצירת רשימה
- ✅ היסטוריה עם pagination (טען עוד)
- ✅ Double-tap ליציאה

### מה לא מטופל / דורש שיפור:
- ❌ **אין אינטרנט** - אין בדיקת connectivity, אין cache מקומי, אין הודעת שגיאה למשתמש
- ❌ **הרבה רשימות** - אין pagination לרשימות (מביא הכל בבת אחת), עלול לפגוע בביצועים
- ✅ **Tutorial** - מופיע רק בפעם הראשונה, נשמר ב-`seenTutorial` ב-Firestore

---

## 🔗 ניווט מדף הבית

| פעולה | מסך יעד | קובץ |
|-------|---------|------|
| לחיצה על רשימה | פרטי רשימה | `shopping_list_details_screen.dart` |
| "+ רשימה חדשה" | יצירת רשימה | `create_list_screen.dart` |
| לחיצה על 📬 | הזמנות ממתינות | `pending_group_invites_screen.dart` |
| לחיצה על קבלה | פרטי קבלה | `receipt_details_screen.dart` |

---

## 📝 סיכום

דף הבית הוא המרכז של האפליקציה.
ממנו אפשר:
- לראות את כל הרשימות הפעילות
- לעבור לפרטי רשימה
- ליצור רשימה חדשה
- לראות היסטוריה
- לעבור לטאבים אחרים (מזווה, קבוצות, הגדרות)
