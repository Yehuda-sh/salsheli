# פערים ותיקונים נדרשים - מזווה

מסמך זה מפרט את הפערים שנמצאו בין האיפיון לקוד הקיים.

---

## סיכום פערים

| נושא | באיפיון | בקוד | מה צריך לעשות |
|------|---------|------|---------------|
| אין אינטרנט | מוגדר | לא מטופל | להוסיף הודעה + קריאה בלבד |
| תאריך תפוגה | מוגדר | חלקי | להוסיף סימון + התראת Push |
| הוספה מקנייה | מוגדר | אוטומטי | לשנות לשאלה בסיום |
| עריכת פריט | מוגדר | לבדוק | דיאלוג עריכה מלא |
| הגבלת פריטים | 500 | אין הגבלה | להוסיף בדיקה |
| התראות מלאי | מוגדר | לבדוק | Push notification |

---

## החלטות שהתקבלו

### 1. אין אינטרנט

**ההחלטה:** כמו שאר המסכים - הודעה + קריאה בלבד

**מה צריך לממש:**
1. הודעה "אין חיבור לאינטרנט"
2. המזווה מוצג (לקריאה בלבד)
3. כפתורי הוספה/עריכה מושבתים
4. כשהאינטרנט חוזר → הודעה נעלמת

---

### 2. תאריך תפוגה

**ההחלטה:** סימון ויזואלי + התראה (אופציונלי!)

**הערה חשובה:**
- רוב המשתמשים לא יכניסו תאריך תפוגה
- זה רק פיצ'ר עזר למי שרוצה לעקוב

**מה קורה כשתאריך עבר:**
1. סימון אדום "⚠️ פג תוקף!" ליד המוצר
2. התראת Push (אם התראות מופעלות)
3. המוצר **לא** נמחק אוטומטית

**למה לא מחיקה אוטומטית?**
- תאריך תפוגה לא תמיד אומר "זרוק"
- המשתמש יחליט מה לעשות

---

### 3. הוספה אוטומטית מקנייה

**ההחלטה:** שאלה בסוף קנייה - "להוסיף למזווה?"

**הזרימה:**
1. יוגב מסיים קנייה
2. מופיעה רשימת מוצרים שנקנו
3. יוגב מסמן מה להוסיף למזווה
4. לוחץ "הוסף למזווה" או "לא תודה"

**למה ככה?**
- לא כל מה שקונים הולך למזווה (חומרי ניקוי, נייר...)
- המשתמש שולט
- פשוט ומהיר

**מה צריך לממש:**
- מסך/דיאלוג אחרי סיום קנייה
- רשימת מוצרים עם checkboxes
- ברירת מחדל: כל המוצרים מסומנים

---

### 4. עריכת פריט

**ההחלטה:** אפשר לערוך הכל

**מה אפשר לערוך:**
- כמות
- מיקום אחסון (מקרר/מקפיא/ארון...)
- תאריך תפוגה
- כמות מינימום להתראה

**מה צריך לממש:**
- דיאלוג עריכה מלא
- כל השדות ניתנים לעריכה
- כפתור "שמור"

---

### 5. הגבלת פריטים

**ההחלטה:** מקסימום 500 פריטים

**למה 500?**
- מזווה משפחתי יכול להכיל הרבה פריטים
- יותר מרשימת קניות (200)
- 500 מספיק גם למשפחות גדולות

**מה צריך לממש:**
- בדיקה לפני הוספת פריט
- אם יש 500 → הודעה "הגעת למקסימום"
- לא לאפשר הוספה נוספת

---

### 6. התראות מלאי נמוך

**ההחלטה:** התראה כשמוצר יורד מתחת למינימום

**הזרימה:**
1. למוצר יש `min_quantity` (ברירת מחדל: 1)
2. כמות יורדת מתחת למינימום
3. סימון "⚠️ נמוך במלאי!" ליד המוצר
4. התראת Push (אופציונלי)

**TODO לעתיד:**
- הצעה אוטומטית להוסיף לרשימת קניות

---

## סדר עדיפויות לתיקון

### עדיפות גבוהה (פונקציונליות חסרה)
| # | מה לתקן | קובץ |
|---|---------|------|
| 1 | הוספה מקנייה - שאלה במקום אוטומטי | `shopping_summary_screen.dart` |
| 2 | אין אינטרנט - הודעה | `my_pantry_screen.dart` |
| 3 | הגבלת 500 פריטים | `inventory_provider.dart` |

### עדיפות בינונית
| # | מה להוסיף | קובץ |
|---|-----------|------|
| 4 | תאריך תפוגה - סימון אדום | `my_pantry_screen.dart` |
| 5 | עריכת פריט - דיאלוג מלא | `pantry_item_dialog.dart` |

### עדיפות נמוכה (שיפורים)
| # | מה להוסיף | קובץ |
|---|-----------|------|
| 6 | התראות Push - תפוגה ומלאי | `notification_service.dart` |
| 7 | הצעה להוסיף לרשימה כשמלאי נמוך | `inventory_provider.dart` |

---

## קבצים עיקריים לשינוי

| קובץ | מה לשנות |
|------|----------|
| `lib/screens/pantry/my_pantry_screen.dart` | offline, תאריך תפוגה |
| `lib/screens/shopping/summary/shopping_summary_screen.dart` | שאלה "להוסיף למזווה?" |
| `lib/providers/inventory_provider.dart` | הגבלת 500, התראות |
| `lib/widgets/pantry/pantry_item_dialog.dart` | עריכה מלאה |

---

## סיכום

המזווה עובד בסיסית, אבל חסרים כמה פיצ'רים חשובים:
1. **הכי חשוב:** לשנות את ההוספה מקנייה לשאלה
2. **חשוב:** הודעת אין אינטרנט
3. **נחמד:** תאריך תפוגה והתראות

**תאריך עדכון אחרון:** ינואר 2026
