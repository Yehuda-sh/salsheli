# ⚠️ בעיות ודברים לבדוק

## 🎯 מה המסמך הזה?

רשימה של דברים שזיהיתי שצריך לבדוק או לתקן:
- קוד שלא הושלם (TODO)
- שיטות ישנות (Deprecated)
- פיצ'רים שלא מחוברים
- שאלות שצריך לבדוק

---

## 📋 TODO - דברים שלא הושלמו

### 1. תנאי שימוש ופרטיות

| קובץ | שורה | הבעיה |
|------|------|-------|
| [welcome_screen.dart](../../../lib/screens/welcome/welcome_screen.dart) | 191 | לחיצה על "תנאי שימוש" - לא מחובר |
| [welcome_screen.dart](../../../lib/screens/welcome/welcome_screen.dart) | 215 | לחיצה על "מדיניות פרטיות" - לא מחובר |
| [settings_screen.dart](../../../lib/screens/settings/settings_screen.dart) | 768 | כפתור תנאי שימוש - לא מחובר |
| [settings_screen.dart](../../../lib/screens/settings/settings_screen.dart) | 780 | כפתור פרטיות - לא מחובר |

**מה צריך לעשות:**
- ליצור מסכים לתנאי שימוש ומדיניות פרטיות
- או: לקשר לדפי אינטרנט חיצוניים

---

### 2. הגדרות שלא נשמרות

| קובץ | שורות | הבעיה |
|------|-------|-------|
| [settings_screen.dart](../../../lib/screens/settings/settings_screen.dart) | 618, 626, 634 | שמירה ל-SharedPreferences לא מומשה |

**מה זה אומר:**
- יש הגדרות שכשמשנים אותן - הן לא נשמרות
- בפעם הבאה שפותחים האפליקציה - חוזר לברירת מחדל

---

### 3. תאריך אירוע בקבוצות

| קובץ | שורה | הבעיה |
|------|------|-------|
| [create_group_screen.dart](../../../lib/screens/groups/create_group_screen.dart) | 73 | בחירת תאריך לאירוע לא מומשה |

**מה זה אומר:**
- כשיוצרים קבוצה לאירוע - אי אפשר לבחור תאריך

---

### 4. ביטול מחיקה במזווה

| קובץ | שורה | הבעיה |
|------|------|-------|
| [my_pantry_screen.dart](../../../lib/screens/pantry/my_pantry_screen.dart) | 285 | אפשרות "בטל מחיקה" לא מומשה |

**מה זה אומר:**
- כשמוחקים פריט מהמזווה - אי אפשר לשחזר

---

### 5. הצעות חכמות - יצירת רשימה

| קובץ | שורה | הבעיה |
|------|------|-------|
| [smart_suggestions_card.dart](../../../lib/screens/home/dashboard/widgets/smart_suggestions_card.dart) | 508 | יצירת רשימה מברירת מחדל לא מומשה |

---

### 6. נתונים חסרים בסימון פריטים

| קובץ | שורה | הבעיה |
|------|------|-------|
| [shopping_lists_provider.dart](../../../lib/providers/shopping_lists_provider.dart) | 1099 | `checkedBy` ו-`checkedAt` לא נשמרים |

**מה זה אומר:**
- כשמסמנים פריט כ"נקנה" - לא נשמר מי סימן ומתי
- בקנייה משותפת זה חשוב לדעת

---

## 🗑️ קוד ישן (Deprecated)

### 1. שירות התראות

| קובץ | שורות | מה ישן |
|------|-------|--------|
| [notifications_service.dart](../../../lib/services/notifications_service.dart) | 730, 773, 806 | 3 מתודות ישנות שצריך להחליף |

**מתודות ישנות:**
- `getUserNotifications` → להחליף ב-Result-based version
- `getUnreadNotifications` → להחליף ב-Result-based version
- `getUnreadCount` → להחליף ב-Result-based version

---

### 2. שירות הזמנות ממתינות

| קובץ | שורות | מה ישן |
|------|-------|--------|
| [pending_invites_service.dart](../../../lib/services/pending_invites_service.dart) | 819-925 | 8 מתודות ישנות |

**מה זה אומר:**
- יש API ישן שעדיין בשימוש
- צריך לעדכן לגרסה החדשה עם `Result`

---

## ❓ שאלות לבדיקה

### זרימת נתונים

| שאלה | היכן לבדוק |
|------|-----------|
| מה קורה אם אין אינטרנט באמצע קנייה? | ActiveShoppingScreen |
| מה קורה אם שני אנשים עורכים רשימה בו-זמנית? | ShoppingListsProvider |
| האם יש timeout לפעולות Firebase? | כל ה-Repositories |
| האם נתונים מסתנכרנים כשחוזרים מהרקע? | Providers |

### פיצ'רים חסרים

| פיצ'ר | סטטוס | הערה |
|-------|-------|------|
| התראות Push על מלאי נמוך | ❓ לא ברור | יש קוד אבל לא ברור אם עובד |
| התראות Push על הזמנות | ❓ לא ברור | צריך לבדוק |
| עריכת פרופיל | ❓ חלקי | אפשר לשנות שם? תמונה? |
| מחיקת חשבון | ❌ חסר | אין אפשרות למחוק חשבון |
| שינוי סיסמה | ❓ לא ברור | צריך לבדוק |
| ייצוא נתונים | ❌ חסר | אין אפשרות לייצא |

---

## 📊 סיכום מצב הקוד

### מספרים

| קטגוריה | כמות |
|---------|------|
| TODO comments | 9 |
| Deprecated methods | 11 |
| קבצים לא בשימוש | 0 |
| קוד מוסתר בהערות | 0 |

### עדיפות לטיפול

| עדיפות | פריט | סיבה |
|--------|-----|------|
| 🔴 גבוהה | תנאי שימוש/פרטיות | נדרש לחוק |
| 🔴 גבוהה | שמירת הגדרות | משפיע על חוויית משתמש |
| 🟡 בינונית | Deprecated methods | הקוד עובד אבל לא מעודכן |
| 🟡 בינונית | checkedBy/checkedAt | חשוב לקנייה משותפת |
| 🟢 נמוכה | ביטול מחיקה | נחמד לקבל |
| 🟢 נמוכה | תאריך אירוע | פיצ'ר משני |

---

## ✅ מה בסדר

**דברים שעובדים טוב:**
- ✅ הרשמה והתחברות
- ✅ יצירת רשימות
- ✅ הוספת מוצרים
- ✅ קנייה פעילה
- ✅ מזווה
- ✅ קבוצות ושיתוף
- ✅ סנכרון בזמן אמת
- ✅ עיצוב RTL

**איכות הקוד:**
- ✅ אין קבצים לא בשימוש
- ✅ אין קוד מוסתר בהערות
- ✅ תיעוד טוב בעברית
- ✅ שמות משתנים ברורים
- ✅ חלוקה נכונה לקבצים

---

## 📝 המלצות

1. **קודם כל** - להשלים תנאי שימוש ופרטיות
2. **אחר כך** - לתקן שמירת הגדרות
3. **בהמשך** - לעדכן את הקוד הישן (Deprecated)
4. **בסוף** - להוסיף פיצ'רים חסרים
