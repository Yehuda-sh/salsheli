// ğŸ“„ lib/core/constants.dart
//
// ×§×‘×•×¢×™× ×œ×•×’×™×™× ×©×œ ×”××¤×œ×™×§×¦×™×” (×œ× UI).
// - Family size limits, Children age groups, Schema version
//
// ğŸ”— Related: ui_constants.dart (UI), repository_constants.dart (Firestore)

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// FAMILY SIZE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//
// TODO(next-wave): ×œ×”×¤×•×š ×-"clamp ×©×§×˜" ×œ-"××–×”×¨×” ×•××– ×—×¡×™××”"
// ×›×¨×’×¢: OnboardingData ×¢×•×©×” clamp ×©×§×˜ (137-151)
// ×¨×¦×•×™: ×œ×”×¦×™×’ ×œ××©×ª××© ×”×•×“×¢×” ×‘×¨×•×¨×” ×›×©×× ×¡×” ×œ×—×¨×•×’ ××”×˜×•×•×—

const int kMinFamilySize = 1;
const int kMaxFamilySize = 10;

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CHILDREN AGES
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

/// Valid children age groups for onboarding (ORDERED list for UI)
/// âœ… Single Source of Truth - ×¡×“×¨ ××•×‘×˜×— ×œ×ª×¦×•×’×” ×‘-Dropdown
const List<String> kChildrenAgeGroups = [
  '0-1', // ×ª×™× ×•×§×•×ª
  '2-3', // ×’×™×œ ×”×¨×š
  '4-6', // ×’×Ÿ
  '7-12', // ×‘×™×ª ×¡×¤×¨
  '13-18', // × ×•×¢×¨
];

/// Set for validation (derived from list)
/// âœ… O(1) lookup ×‘×œ×™ ×œ××‘×“ ×¡×“×¨ ×‘-source
final Set<String> kValidChildrenAges = Set.unmodifiable(kChildrenAgeGroups.toSet());

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SCHEMA VERSION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

/// Current schema version for data migrations
const int kCurrentSchemaVersion = 1;

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DATA LIMITS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

/// ××§×¡×™××•× ×¤×¨×™×˜×™× ×‘×¨×©×™××ª ×§× ×™×•×ª ××—×ª
const int kMaxItemsPerList = 200;

/// ××§×¡×™××•× ×¤×¨×™×˜×™× ×‘××–×•×•×”
const int kMaxItemsPerPantry = 500;

/// ××§×¡×™××•× ×¨×©×™××•×ª ×¤×¢×™×œ×•×ª ×œ××©×ª××©
const int kMaxActiveListsPerUser = 100;

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// WARNING THRESHOLDS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

/// ×¡×£ ×œ×”×¦×’×ª ××–×”×¨×” ×¢×œ ×§×¨×‘×” ×œ××’×‘×œ×” (80%)
/// × ×•×¢×“ ×œ×©×™××•×© ×‘-UI ×‘×œ×‘×“ - ×œ× ×‘××›×™×¤×”
const double kLimitWarningThreshold = 0.8;

/// ×‘×•×“×§ ×× ×”×’×¢× ×• ×œ×¡×£ ××–×”×¨×” (80%) ××‘×œ ×¢×“×™×™×Ÿ ×œ× ×œ××§×¡×™××•×
///
/// **Usage (UI layer):**
/// ```dart
/// if (isNearLimit(list.items.length, kMaxItemsPerList)) {
///   // Show warning once per screen/session
/// }
/// ```
bool isNearLimit(int current, int max) {
  if (max <= 0) return false;
  final percentage = current / max;
  return percentage >= kLimitWarningThreshold && current < max;
}

/// ××—×–×™×¨ ××—×•×– × ×™×¦×•×œ ×©×œ ××’×‘×œ×” (0.0 - 1.0)
double getLimitUsage(int current, int max) {
  if (max <= 0) return 0.0;
  return (current / max).clamp(0.0, 1.0);
}
